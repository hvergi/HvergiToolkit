
@page "/Apps/SkillTracker"
@using HvergiToolkit.Models
@using Microsoft.AspNetCore.Components.WebView.Maui

@inject PlayerService PlayersData
@inject PlayerLogReaderService LogReader

<RadzenRow>

</RadzenRow>
<RadzenRow>
    <RadzenColumn>
        <RadzenRow AlignItems="AlignItems.Center" class="rz-mb-2">
            <RadzenLabel Text="Select Player" />
            <RadzenDropDown @bind-Value=@selectedPlayerModel Data="@PlayersData.PlayerModels" TextProperty="@nameof(PlayerModel.PlayerName)" Style="flex:1" />
            <RadzenLabel Text="Primary Skill" />
            <RadzenDropDown TValue="string" Data="@skillTrackerList" Style="flex:1" />
        </RadzenRow>
        <RadzenRow AlignItems="AlignItems.Center" class="rz-mb-2">
            <RadzenLabel Text="Action Set" />
            <RadzenDropDown TValue="string" Style="flex:2"/>
            <RadzenButton Text="Edit ActionSets" Style="flex:1"/>
        </RadzenRow>
        <RadzenRow AlignItems="AlignItems.Center" class="rz-mb-2">
            <RadzenButton Text="Start" Style="flex:auto" Click="Start" Disabled="@isRunning"/>
            <RadzenButton Text="Stop" Style="flex:auto" Click="Stop" Disabled="@(!isRunning)"/>
            <RadzenButton Text="@IsPausedText" Style="flex:auto" Click="Pause" Disabled="@(!isRunning)"/>
            <RadzenButton Text="Reset" Style="flex:auto" Click="Reset" Disabled="@(!isPaused)"/>
        </RadzenRow>
        <RadzenRow AlignItems="AlignItems.Center" class="rz-mb-2">
            <RadzenStack Orientation="Orientation.Horizontal" Gap="1" Style="flex:auto">
                <RadzenLabel Text="Actions:" />
                <RadzenLabel Text="0" />
            </RadzenStack>
            <RadzenStack Orientation="Orientation.Horizontal" Gap="1" Style="flex:auto">
                <RadzenLabel Text="Fails:" />
                <RadzenLabel Text="0" />
            </RadzenStack>
            <RadzenStack Orientation="Orientation.Horizontal" Gap="1" Style="flex:auto">
                <RadzenLabel Text="Running Time:" />
                <RadzenLabel Text="@stopwatch.Elapsed.TotalSeconds.ToString()" />
            </RadzenStack>
        </RadzenRow>
        <RadzenRow AlignItems="AlignItems.Center" class="rz-mb-2">
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="1" Style="flex:auto">
                <RadzenLabel Text="Goal" />
                <RadzenNumeric Min="1" Max="100" TValue="double" />
            </RadzenStack>
            <RadzenStack Orientation="Orientation.Horizontal" Gap="1" Style="flex:auto">
                <RadzenLabel Text="STP Left:" />
                <RadzenLabel Text="0" />
            </RadzenStack>
            <RadzenStack Orientation="Orientation.Horizontal" Gap="1" Style="flex:auto">
                <RadzenLabel Text="Time Left:" />
                <RadzenLabel Text="0" />
            </RadzenStack>
        </RadzenRow>
    </RadzenColumn>
    <RadzenColumn Style="width:60%">
        <RadzenTable>
            <RadzenTableHeader>
                <RadzenTableHeaderRow>
                    <RadzenTableHeaderCell Style="width:175px">Skill Name</RadzenTableHeaderCell>
                    <RadzenTableHeaderCell Style="width:100px">Gained</RadzenTableHeaderCell>
                    <RadzenTableHeaderCell Style="width:100px">Tick Percent</RadzenTableHeaderCell>
                    <RadzenTableHeaderCell Style="width:100px">STP/H</RadzenTableHeaderCell>
                    <RadzenTableHeaderCell Style="width:100px">Ticks</RadzenTableHeaderCell>
                    <RadzenTableHeaderCell Style="width:100px">High</RadzenTableHeaderCell>
                    <RadzenTableHeaderCell Style="width:100px">Starting</RadzenTableHeaderCell>
                    <RadzenTableHeaderCell Style="width:100px">Current</RadzenTableHeaderCell>
                    <RadzenTableHeaderCell Style="width:100px">STP Gained</RadzenTableHeaderCell>
                </RadzenTableHeaderRow>
            </RadzenTableHeader>
            <RadzenTableBody>
                @foreach(KeyValuePair<string,double> kvp in skillTicks){
                    <RadzenTableRow>
                        <RadzenTableCell>@kvp.Key</RadzenTableCell>
                        <RadzenTableCell>@kvp.Value</RadzenTableCell>
                        
                    </RadzenTableRow>
                }
            </RadzenTableBody>
        </RadzenTable>
    </RadzenColumn>
</RadzenRow>
<RadzenRow>
    
</RadzenRow>


